<!DOCTYPE html
PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<head>
<title>Alberti Cipher Disk</title>
<script src="jquery-2.1.0.js"></script>
<script src="raphael.js"></script>
</head>

<body>
<div id="holder"></div>
<script>

Raphael.fn.pieChart = function (cx, cy, r, values, labels, stroke) {
        var paper = this,
            rad = Math.PI / 180;

    function sector(cx, cy, r, startAngle, endAngle, params) {
        var x1 = cx + r * Math.cos(-startAngle * rad),
            x2 = cx + r * Math.cos(-endAngle * rad),
            y1 = cy + r * Math.sin(-startAngle * rad),
            y2 = cy + r * Math.sin(-endAngle * rad);
        var path = paper.path(["M", cx, cy, "L", x1, y1, "A", r, r, 0, +(endAngle - startAngle > 180), 0, x2, y2, "z"]).attr(params);
        return path;
        var sector = {cx: cx, cy: cy, size: endAngle - startAngle, path: path};
        return sector;
    }

    function sector_set(sector, cx, cy, r, startAngle, endAngle, params) {
        var x1 = cx + r * Math.cos(-startAngle * rad),
            x2 = cx + r * Math.cos(-endAngle * rad),
            y1 = cy + r * Math.sin(-startAngle * rad),
            y2 = cy + r * Math.sin(-endAngle * rad);
        var attrs = ["M", cx, cy, "L", x1, y1, "A", r, r, 0, +(endAngle - startAngle > 180), 0, x2, y2, "z"];
        sector.attr("path", attrs);
    }

    

    params = {fill: "#0fc", "stroke-width": 3};
    p = sector(200, 200, 100, 0, 45, params);
    angle = 10;
    p.click(function(){
                sector_set(p, 200, 200, 100, angle, angle + 45, params);
                angle += 10;
            });

}


$(function () {
        $("table").hide();
        Raphael("holder", 700, 700).pieChart(350, 350, 200, [], [], "#f0f");
        });

</script>
<table>
    <tbody>
    <tr>
        <th scope="row">Ruby</th>
        <td>40%</td>
    </tr>
    <tr>
        <th scope="row">JavaScript</th>
        <td>26%</td>
    </tr>
    <tr>
        <th scope="row">Shell</th>
        <td>5%</td>
    </tr>
    <tr>
        <th scope="row">Python</th>
        <td>5%</td>
    </tr>
    <tr>
        <th scope="row">PHP</th>
        <td>4%</td>
    </tr>
    <tr>
        <th scope="row">C</th>
        <td>4%</td>
    </tr>
    <tr>
        <th scope="row">Perl</th>
        <td>3%</td>
    </tr>
    <tr>
        <th scope="row">C++</th>
        <td>2%</td>
    </tr>
    <tr>
        <th scope="row">Java</th>
        <td>2%</td>
    </tr>
    <tr>
        <th scope="row">Objective-C</th>
        <td>2%</td>
    </tr>
    </tbody>
</table>
</body>
</html>
